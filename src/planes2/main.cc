#include "dml/dml.h"
#include "plane.h"
#include "bullets.h"

#include <chrono>
#include <thread>

int main() {
  dml::VM cpu;
  
  const std::string prog = { 
    0x01, 0x2C, 0x00, 0x00, 0x00, 0x06,
    0x00, 0x2A, 0x00, 0x00, 0x00, 0x03,
    0x00, 0x2A, 0x00, 0x00, 0x00, 0x04, 
    0x00, 0x32, 
    0x00, 0x2A, 0x00, 0x00, 0x00, 0x03,
    0x00, 0x2A, 0x00, 0x00, 0x00, 0x04, 
    0x00, 0x32, 
    0x00, 0x17, 0x00, 0x00, 0x00, 0x5A, 
    0x00, 0x2B, 0x00, 0x00, 0x00, 0x01,
    0x00, 0x17, 0x00, 0x00, 0x00, 0x03,
    0x02, 0x58, 0x00, 0x00, 0x00, 0x00,
  };
              

  cpu.load_script(std::move(prog));

  cpu.init();
  cpu.run();

  // plane::main_loop();
}
